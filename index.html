<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Accelerator by AndrewGuenther</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Accelerator</h1>
      <h2 class="project-tagline">A React view engine for Express which supports client-side mounting.</h2>
      <a href="https://github.com/AndrewGuenther/Accelerator" class="btn">View on GitHub</a>
      <a href="https://github.com/AndrewGuenther/Accelerator/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/AndrewGuenther/Accelerator/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="accelerator" class="anchor" href="#accelerator" aria-hidden="true"><span class="octicon octicon-link"></span></a>Accelerator</h1>

<p><a href="http://badge.fury.io/js/accelerator"><img src="https://badge.fury.io/js/accelerator.svg" alt="npm version"></a>
<a href="https://travis-ci.org/AndrewGuenther/Accelerator"><img src="https://travis-ci.org/AndrewGuenther/Accelerator.svg" alt="Build Status"></a>
<a href="https://coveralls.io/github/AndrewGuenther/Accelerator?branch=master"><img src="https://coveralls.io/repos/AndrewGuenther/Accelerator/badge.svg?branch=master&amp;service=github" alt="Coverage Status"></a></p>

<p>A <a href="http://facebook.github.io/react/">React</a> view engine for <a href="http://expressjs.com/">Express</a> which supports client-side
mounting.</p>

<h2>
<a id="installing" class="anchor" href="#installing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installing</h2>

<pre><code>npm install accelerator
</code></pre>

<h2>
<a id="adding-accelerator-to-your-app" class="anchor" href="#adding-accelerator-to-your-app" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding Accelerator to your app</h2>

<p>In your main app file, add the following:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-c">// app.js</span>

<span class="pl-k">var</span> app <span class="pl-k">=</span> express();

app.set(<span class="pl-s"><span class="pl-pds">'</span>views<span class="pl-pds">'</span></span>, <span class="pl-c1">__dirname</span> <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span>/views<span class="pl-pds">'</span></span>);
app.set(<span class="pl-s"><span class="pl-pds">'</span>view engine<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>jsx<span class="pl-pds">'</span></span>);
app.engine(<span class="pl-s"><span class="pl-pds">'</span>jsx<span class="pl-pds">'</span></span>, <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>accelerator<span class="pl-pds">'</span></span>).createEngine());</pre></div>

<h2>
<a id="rendering-a-view" class="anchor" href="#rendering-a-view" aria-hidden="true"><span class="octicon octicon-link"></span></a>Rendering a view</h2>

<p>Here is a simple example of a route returning an Accelerator view</p>

<div class="highlight highlight-javascript"><pre><span class="pl-c">// app.js</span>

app.get(<span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">req</span>, <span class="pl-smi">res</span>) {
   res.render(<span class="pl-s"><span class="pl-pds">'</span>homepage<span class="pl-pds">'</span></span>, {props<span class="pl-k">:</span> {name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Andrew<span class="pl-pds">'</span></span>}});
});</pre></div>

<p>When we render a view using Accelerator, the actual properties which will be
passed to our React element are stored in the <code>props</code> key of our options
object.</p>

<p>Here's what <code>homepage.jsx</code> looks like.</p>

<div class="highlight highlight-javascript"><pre><span class="pl-c">// views/homepage.jsx</span>

<span class="pl-k">var</span> React <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>react<span class="pl-pds">'</span></span>)

<span class="pl-c1">module</span>.exports <span class="pl-k">=</span> React.createClass({
   <span class="pl-en">render</span><span class="pl-k">:</span> <span class="pl-k">function</span>() {
      <span class="pl-k">return</span> (
         <span class="pl-k">&lt;</span>div<span class="pl-k">&gt;</span>
            <span class="pl-k">&lt;</span>h1<span class="pl-k">&gt;</span>Hello {<span class="pl-v">this</span>.props.<span class="pl-c1">name</span>}<span class="pl-k">&lt;</span>/h1<span class="pl-k">&gt;</span>
         <span class="pl-k">&lt;</span>/div<span class="pl-k">&gt;</span>
      );
   }
});</pre></div>

<p>Here's what the resulting HTML will look like:</p>

<div class="highlight highlight-html"><pre>&lt;<span class="pl-ent">html</span>&gt;
   &lt;<span class="pl-ent">body</span>&gt;
      &lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>content<span class="pl-pds">"</span></span>&gt;
         &lt;<span class="pl-ent">div</span> <span class="pl-e">data-reactid</span>=<span class="pl-s"><span class="pl-pds">"</span>.hi3kxtgbnk<span class="pl-pds">"</span></span> <span class="pl-e">data-react-checksum</span>=<span class="pl-s"><span class="pl-pds">"</span>-480494251<span class="pl-pds">"</span></span>&gt;
            &lt;<span class="pl-ent">h1</span> <span class="pl-e">data-reactid</span>=<span class="pl-s"><span class="pl-pds">"</span>.hi3kxtgbnk.0<span class="pl-pds">"</span></span>&gt;What the Code&lt;/<span class="pl-ent">h1</span>&gt;
         &lt;/<span class="pl-ent">div</span>&gt;
      &lt;/<span class="pl-ent">div</span>&gt;
<span class="pl-s1">      &lt;<span class="pl-ent">script</span>&gt;<span class="pl-k">var</span> <span class="pl-c1">APP_PROPS</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>Andrew<span class="pl-pds">"</span></span>};&lt;/<span class="pl-ent">script</span>&gt;</span>
   &lt;/<span class="pl-ent">body</span>&gt;
&lt;/<span class="pl-ent">html</span>&gt;</pre></div>

<p>So what did Accelerator do? When you pass a view to the <code>render()</code> function
Accelerator will require that file and render whatever React class is exported
to non-static markup. This means that the <code>react-id</code> and <code>data-react-checksum</code>
fields will be preserved (they're necessary for mounting on the client later).
The resulting element will then be mounted on a <code>&lt;div&gt;</code> with the <code>id</code>
"content." You will also notice that your <code>props</code> are nicely added there at the
bottom so that you can more easily mount cleanly on the client. Here's what
your client mounting will look like:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-c">// client.js</span>

React.render(React.<span class="pl-c1">createElement</span>(Homepage, <span class="pl-c1">APP_PROPS</span>), <span class="pl-c1">document</span>.<span class="pl-c1">getElementById</span>(<span class="pl-s"><span class="pl-pds">"</span>content<span class="pl-pds">"</span></span>))</pre></div>

<p><strong>Note:</strong> This assumes that you've used <a href="http://browserify.org/">Browserify</a> to package up
your export from <code>homepage.jsx</code> above. The details of how to do this aren't
covered here. See the Browserify documentation.</p>

<p><strong>Another note:</strong> The clever observer may notice that our example page has no
<code>&lt;head&gt;</code> element and also doesn't include <code>client.js</code> anywhere. I know it is
wrong, but don't worry, we'll get to that in a minute.</p>

<p>Why mount to "content" and not directly to the <code>&lt;body&gt;</code>? There's a few reasons.</p>

<ol>
<li>React doesn't like mounting directly to the body, you'll see it
complain if you try.</li>
<li>Also, notice that nifty little <code>&lt;script&gt;</code> element with
your initial props in it at the bottom there? That can't be there if you mount
directly to the <code>&lt;body&gt;</code>, otherwise the checksum would fail when you try to
mount.</li>
<li>Lastly, this allows us to inject other static markup at the bottom of
the <code>&lt;body&gt;</code> without failing the checksum.</li>
</ol>

<h2>
<a id="the-head-and-post-properties" class="anchor" href="#the-head-and-post-properties" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>head</code> and <code>post</code> properties</h2>

<p>You'll notice that our above example is lacking a <code>&lt;head&gt;</code> element. Don't
worry, Accelerator will handle that. Let's expand a bit on our example.</p>

<div class="highlight highlight-javascript"><pre><span class="pl-c">// app.js</span>

app.get(<span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">req</span>, <span class="pl-smi">res</span>) {
   res.render(<span class="pl-s"><span class="pl-pds">'</span>homepage<span class="pl-pds">'</span></span>, {
      props<span class="pl-k">:</span> {name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Andrew<span class="pl-pds">'</span></span>},
      head<span class="pl-k">:</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>./views/head.jsx<span class="pl-pds">'</span></span>),
      head_props<span class="pl-k">:</span> {title<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>My Homepage<span class="pl-pds">'</span></span>},
      post<span class="pl-k">:</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>./views/post.jsx<span class="pl-pds">'</span></span>),
      post_props<span class="pl-k">:</span> {src<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/js/client.js<span class="pl-pds">'</span></span>} 
   });
});</pre></div>

<p>Well that is certainly different. Let's take a look at these bad boys.</p>

<div class="highlight highlight-javascript"><pre><span class="pl-c">// head.jsx</span>

<span class="pl-k">var</span> React <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>react<span class="pl-pds">'</span></span>);

<span class="pl-c1">module</span>.exports <span class="pl-k">=</span> React.createClass({
   <span class="pl-en">render</span><span class="pl-k">:</span> <span class="pl-k">function</span>() {
      <span class="pl-k">return</span> (
         <span class="pl-k">&lt;</span>head<span class="pl-k">&gt;</span>
            <span class="pl-k">&lt;</span>title<span class="pl-k">&gt;</span>{<span class="pl-v">this</span>.props.<span class="pl-c1">title</span>}<span class="pl-k">&lt;</span>/title<span class="pl-k">&gt;</span>
            <span class="pl-k">&lt;</span>link rel<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>stylesheet<span class="pl-pds">"</span></span> type<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>text/css<span class="pl-pds">"</span></span> href<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>/css/base.css<span class="pl-pds">"</span></span> /<span class="pl-k">&gt;</span>
         <span class="pl-k">&lt;</span>/head<span class="pl-k">&gt;</span>
   )}
});</pre></div>

<div class="highlight highlight-javascript"><pre><span class="pl-c">// post.jsx</span>

<span class="pl-k">var</span> React <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>react<span class="pl-pds">'</span></span>);

<span class="pl-c1">module</span>.exports <span class="pl-k">=</span> React.createClass({
   <span class="pl-en">render</span><span class="pl-k">:</span> <span class="pl-k">function</span>() {
      <span class="pl-k">return</span> (
         <span class="pl-k">&lt;</span>div<span class="pl-k">&gt;</span>
            <span class="pl-k">&lt;</span>script src<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>http://fb.me/react-0.13.3.js<span class="pl-pds">"</span></span><span class="pl-k">&gt;&lt;</span>/script<span class="pl-k">&gt;</span>
            <span class="pl-k">&lt;</span>script src<span class="pl-k">=</span>{<span class="pl-v">this</span>.props.src}<span class="pl-k">&gt;&lt;</span>/script<span class="pl-k">&gt;</span>
         <span class="pl-k">&lt;</span>/div<span class="pl-k">&gt;</span>
   )}
});</pre></div>

<p>Accelerator renders both the <code>head</code> and <code>post</code> parameters to <strong>static</strong> markup
and inserts them above and below your the <code>&lt;div id="content"&gt;</code> element,
respectively. As you have likely guessed, <code>head_props</code> and <code>post_props</code> get
passed as props when the elements are rendered.</p>

<p>So <em>now</em> what does our HTML look like?</p>

<div class="highlight highlight-html"><pre>&lt;<span class="pl-ent">html</span>&gt;
   &lt;<span class="pl-ent">head</span>&gt;
      &lt;<span class="pl-ent">title</span>&gt;My Homepage&lt;/<span class="pl-ent">title</span>&gt;
      &lt;<span class="pl-ent">link</span> <span class="pl-e">rel</span>=<span class="pl-s"><span class="pl-pds">"</span>stylesheet<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text/css<span class="pl-pds">"</span></span> <span class="pl-e">href</span>=<span class="pl-s"><span class="pl-pds">"</span>/css/base.css<span class="pl-pds">"</span></span> /&gt;
   &lt;/<span class="pl-ent">head</span>&gt;
   &lt;<span class="pl-ent">body</span>&gt;
      &lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>content<span class="pl-pds">"</span></span>&gt;
         &lt;<span class="pl-ent">div</span> <span class="pl-e">data-reactid</span>=<span class="pl-s"><span class="pl-pds">"</span>.hi3kxtgbnk<span class="pl-pds">"</span></span> <span class="pl-e">data-react-checksum</span>=<span class="pl-s"><span class="pl-pds">"</span>-480494251<span class="pl-pds">"</span></span>&gt;
            &lt;<span class="pl-ent">h1</span> <span class="pl-e">data-reactid</span>=<span class="pl-s"><span class="pl-pds">"</span>.hi3kxtgbnk.0<span class="pl-pds">"</span></span>&gt;What the Code&lt;/<span class="pl-ent">h1</span>&gt;
         &lt;/<span class="pl-ent">div</span>&gt;
      &lt;/<span class="pl-ent">div</span>&gt;
<span class="pl-s1">      &lt;<span class="pl-ent">script</span>&gt;<span class="pl-k">var</span> <span class="pl-c1">APP_PROPS</span> <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>Andrew<span class="pl-pds">"</span></span>};&lt;/<span class="pl-ent">script</span>&gt;</span>
      &lt;<span class="pl-ent">div</span>&gt;
<span class="pl-s1">         &lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>http://fb.me/react-0.13.3.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</span>
<span class="pl-s1">         &lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>/js/client.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</span>
      &lt;/<span class="pl-ent">div</span>&gt;
   &lt;/<span class="pl-ent">body</span>&gt;
&lt;/<span class="pl-ent">html</span>&gt;</pre></div>

<p>And there you have it.</p>

<h2>
<a id="tldr" class="anchor" href="#tldr" aria-hidden="true"><span class="octicon octicon-link"></span></a>TL;DR</h2>

<p>Render a view like this:</p>

<div class="highlight highlight-javascript"><pre>app.get(<span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">req</span>, <span class="pl-smi">res</span>) {
   res.render(<span class="pl-s"><span class="pl-pds">'</span>homepage<span class="pl-pds">'</span></span>, {
      props<span class="pl-k">:</span> {name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Andrew<span class="pl-pds">'</span></span>},
      head<span class="pl-k">:</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>./views/head.jsx<span class="pl-pds">'</span></span>),
      head_props<span class="pl-k">:</span> {title<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>My Homepage<span class="pl-pds">'</span></span>},
      post<span class="pl-k">:</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>./views/post.jsx<span class="pl-pds">'</span></span>),
      post_props<span class="pl-k">:</span> {src<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/js/client.js<span class="pl-pds">'</span></span>}
   });
});</pre></div>

<p>And Accelerator will use it to generate a page based on this:</p>

<div class="highlight highlight-html"><pre>&lt;<span class="pl-ent">html</span>&gt;
   &lt;<span class="pl-ent">head</span>_elem /&gt;
   &lt;<span class="pl-ent">body</span>&gt;
      &lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>content<span class="pl-pds">"</span></span>&gt;
         &lt;<span class="pl-ent">view</span>_elem /&gt;
      &lt;/<span class="pl-ent">div</span>&gt;
<span class="pl-s1">      &lt;<span class="pl-ent">script</span>&gt;<span class="pl-k">var</span> <span class="pl-c1">APP_PROPS</span><span class="pl-k">=</span>view_props;&lt;/<span class="pl-ent">script</span>&gt;</span>
      &lt;<span class="pl-ent">post</span>_elem /&gt;
   &lt;/<span class="pl-ent">body</span>&gt;
&lt;/<span class="pl-ent">html</span>&gt;</pre></div>

<p>Get it? Got it? Good. Don't get it? Feel free to submit an issue!</p>

<h2>
<a id="why-not-express-react-views" class="anchor" href="#why-not-express-react-views" aria-hidden="true"><span class="octicon octicon-link"></span></a>Why not <a href="https://github.com/reactjs/express-react-views">express-react-views</a>?</h2>

<p>The maintainers of the express-react-views project have explicitly stated that
they have no intent to supoort client-side mounting and reject any
contributions which try to add this functionality.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/AndrewGuenther/Accelerator">Accelerator</a> is maintained by <a href="https://github.com/AndrewGuenther">AndrewGuenther</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
